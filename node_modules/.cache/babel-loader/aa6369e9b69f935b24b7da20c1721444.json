{"ast":null,"code":"var _jsxFileName = \"/Users/eduardoescobar/proyectos/own/hedu911-template/src/components/QueryView/DynamicForm/DynamicForm.tsx\";\nimport React from \"react\";\nimport useHttp from \"../../../hooks/http\";\nimport FormField from \"./FormField/FormField\";\nimport Modal from \"react-bootstrap/Modal\";\n\nconst DynamicForm = ({\n  elements,\n  requestType,\n  title,\n  submitText,\n  show,\n  size,\n  submitted,\n  handleClose,\n  valueChanged\n}) => {\n  const [filterElements, setFilterElements] = useState([]);\n  const {\n    isLoading,\n    error,\n    data,\n    sendRequest,\n    reqExtra,\n    reqIdentifer,\n    clear\n  } = useHttp();\n\n  const internalValueChanged = (name, value) => {\n    let updatedFilterElements = [...filterElements];\n    updatedFilterElements.forEach(function (item) {\n      if (item.name == name) {\n        if (item.type == \"text\" || item.type == \"date\" || item.type == \"textarea\") {\n          item.value = value;\n        } else {\n          if (item.type == \"select\") {\n            item.selectedItemKey = value;\n          }\n        }\n      }\n    });\n    setFilterElements(updatedFilterElements);\n  };\n\n  const filterParamsUrl = () => {\n    let result = [];\n    filterParams().filter(i => i.value !== \"\").forEach(function (item) {\n      result.push(`${item.key}=${encodeURIComponent(item.value)}`);\n    });\n    return result.join(\"&\");\n  };\n\n  const filterParams = () => {\n    const result = [];\n    filterElements.forEach(function (item) {\n      if (item.type == \"text\" || item.type == \"date\" || item.type == \"number\") {\n        result.push({\n          key: item.name,\n          value: item.value\n        });\n      } else {\n        if (item.type == \"select\") {\n          result.push({\n            key: item.name,\n            value: item.selectedItemKey\n          });\n        }\n      }\n    });\n    return result;\n  };\n\n  const submitHandler = () => {\n    const params = filterParamsUrl();\n\n    switch (requestType) {\n      case \"POST\":\n        sendRequest(`${requestUrl}?${params}`, \"POST\", null, null, \"SET\");\n        break;\n\n      case \"PUT\":\n        sendRequest(`${requestUrl}?${params}`, \"PUT\", null, null, \"SET\");\n        break;\n    }\n  };\n\n  const items = elements.map(element => /*#__PURE__*/React.createElement(\"div\", {\n    key: element.name,\n    className: \"col-sm-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }\n  }, element.displayName), /*#__PURE__*/React.createElement(FormField, {\n    descriptor: element,\n    valueChanged: (name, value) => internalValueChanged(name, value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }\n  })));\n  return /*#__PURE__*/React.createElement(Modal, {\n    cssModule: {\n      \"modal-title\": \"w-100 text-center\"\n    },\n    size: size,\n    show: show,\n    onHide: () => handleClose(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 9\n    }\n  }, title)), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: () => submitHandler(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 11\n    }\n  }, items), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"submit\",\n    value: submitText,\n    disabled: isLoading,\n    className: \"btn btn-success btn-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 17\n    }\n  })))))));\n};\n\nexport default DynamicForm;","map":{"version":3,"sources":["/Users/eduardoescobar/proyectos/own/hedu911-template/src/components/QueryView/DynamicForm/DynamicForm.tsx"],"names":["React","useHttp","FormField","Modal","DynamicForm","elements","requestType","title","submitText","show","size","submitted","handleClose","valueChanged","filterElements","setFilterElements","useState","isLoading","error","data","sendRequest","reqExtra","reqIdentifer","clear","internalValueChanged","name","value","updatedFilterElements","forEach","item","type","selectedItemKey","filterParamsUrl","result","filterParams","filter","i","push","key","encodeURIComponent","join","submitHandler","params","requestUrl","items","map","element","displayName"],"mappings":"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","sourcesContent":["import React from \"react\";\n\nimport useHttp from \"../../../hooks/http\";\nimport FormField from \"./FormField/FormField\";\nimport Modal from \"react-bootstrap/Modal\";\nimport Button from \"react-bootstrap/Button\";\n\nexport type SelectItem = {\n  key: string;\n  value: string;\n};\n\nexport type InputDescriptor = {\n  displayName: string;\n  name: string;\n  type: \"text\" | \"select\" | \"number\" | \"textarea\" | \"date\";\n  value?: string;\n  placeholder?: string;\n  min?: number;\n  max?: number;\n  upCase?: boolean;\n  isDate?: boolean;\n  classes?: Array<string>;\n  items?: Array<SelectItem>;\n  selectedItemKey?: string;\n  required: boolean;\n};\n\ninterface UrlItem {\n  key: string;\n  value: string;\n}\n\ntype Props = {\n  elements: Array<InputDescriptor>;\n  requestType: string;\n  title: string;\n  submitText: string;\n  show: boolean;\n  size: \"sm\" | \"lg\" | \"xl\" | undefined;\n  submitted(error?: string): any;\n  handleClose(): any;\n  valueChanged(name: string, value: string): any;\n};\n\nconst DynamicForm: React.FC<Props> = ({\n  elements,\n  requestType,\n  title,\n  submitText,\n  show,\n  size,\n  submitted,\n  handleClose,\n  valueChanged,\n}) => {\n  const [filterElements, setFilterElements] = useState<Array<InputDescriptor>>(\n    []\n  );\n\n  const {\n    isLoading,\n    error,\n    data,\n    sendRequest,\n    reqExtra,\n    reqIdentifer,\n    clear,\n  } = useHttp();\n\n  const internalValueChanged = (name: string, value: string) => {\n    let updatedFilterElements = [...filterElements];\n    updatedFilterElements.forEach(function (item: InputDescriptor) {\n      if (item.name == name) {\n        if (\n          item.type == \"text\" ||\n          item.type == \"date\" ||\n          item.type == \"textarea\"\n        ) {\n          item.value = value;\n        } else {\n          if (item.type == \"select\") {\n            item.selectedItemKey = value;\n          }\n        }\n      }\n    });\n    setFilterElements(updatedFilterElements);\n  };\n\n  const filterParamsUrl = (): string => {\n    let result: Array<string> = [];\n    filterParams()\n      .filter((i) => i.value !== \"\")\n      .forEach(function (item: UrlItem) {\n        result.push(`${item.key}=${encodeURIComponent(item.value)}`);\n      });\n    return result.join(\"&\");\n  };\n\n  const filterParams = (): Array<UrlItem> => {\n    const result: Array<UrlItem> = [];\n    filterElements.forEach(function (item: InputDescriptor) {\n      if (item.type == \"text\" || item.type == \"date\" || item.type == \"number\") {\n        result.push({ key: item.name, value: item.value! });\n      } else {\n        if (item.type == \"select\") {\n          result.push({ key: item.name, value: item.selectedItemKey! });\n        }\n      }\n    });\n    return result;\n  };\n\n  const submitHandler = () => {\n    const params = filterParamsUrl();\n    switch (requestType) {\n      case \"POST\":\n        sendRequest(`${requestUrl}?${params}`, \"POST\", null, null, \"SET\");\n        break;\n      case \"PUT\":\n        sendRequest(`${requestUrl}?${params}`, \"PUT\", null, null, \"SET\");\n        break;\n    }\n  };\n\n  const items = elements.map((element) => (\n    <div key={element.name} className=\"col-sm-6\">\n      <label>{element.displayName}</label>\n      <FormField\n        descriptor={element}\n        valueChanged={(name: string, value: string) =>\n          internalValueChanged(name, value)\n        }\n      />\n    </div>\n  ));\n\n  return (\n    <Modal\n      cssModule={{ \"modal-title\": \"w-100 text-center\" }}\n      size={size}\n      show={show}\n      onHide={() => handleClose()}\n    >\n      <Modal.Header closeButton>\n        <Modal.Title>{title}</Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <form onSubmit={() => submitHandler()}>\n          <div className=\"form-group row\">{items}</div>\n          <div className=\"row\">\n            <div className=\"col-md-12\">\n              <div className=\"text-center\">\n                <input\n                  type=\"submit\"\n                  value={submitText}\n                  disabled={isLoading}\n                  className=\"btn btn-success btn-lg\"\n                />\n              </div>\n            </div>\n          </div>\n        </form>\n      </Modal.Body>\n    </Modal>\n  );\n};\n\nexport default DynamicForm;\n"]},"metadata":{},"sourceType":"module"}