{"ast":null,"code":"var _jsxFileName = \"/Users/eduardoescobar/proyectos/own/hedu911-template/src/containers/Services/Services.tsx\";\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport TableFilters from \"../../components/QueryView/TableFilters/TableFilters\";\nimport DynamicTable from \"../../components/QueryView/DynamicTable/DynamicTable\";\nimport TablePagination from \"../../components/QueryView/TablePagination/TablePagination\";\nimport styles from \"./Services.module.css\";\nvar DataState;\n\n(function (DataState) {\n  DataState[DataState[\"Loading\"] = 0] = \"Loading\";\n  DataState[DataState[\"Loaded\"] = 1] = \"Loaded\";\n  DataState[DataState[\"Error\"] = 2] = \"Error\";\n})(DataState || (DataState = {}));\n\nconst Services = ({}) => {\n  const filterElements = [{\n    name: \"id\",\n    type: \"text\",\n    placeholder: \"Id\"\n  }, {\n    name: \"numero_documento\",\n    type: \"text\",\n    placeholder: \"Numero de documento\"\n  }, {\n    name: \"primer_nombre\",\n    type: \"text\",\n    placeholder: \"Primer nombre\",\n    upCase: true\n  }, {\n    name: \"primer_apellido\",\n    type: \"text\",\n    placeholder: \"Primer apellido\",\n    upCase: true\n  }, {\n    name: \"fecha_inicio\",\n    type: \"date\",\n    placeholder: \"Fecha inicio\"\n  }, {\n    name: \"fecha_fin\",\n    type: \"date\",\n    placeholder: \"Fecha fin\",\n    value: \"1990-12-12\"\n  }, {\n    name: \"estado\",\n    type: \"select\",\n    placeholder: \"Estado\",\n    items: [{\n      key: \"1\",\n      value: \"Pendiente\"\n    }, {\n      key: \"2\",\n      value: \"Aprobado\"\n    }, {\n      key: \"3\",\n      value: \"Rechazado\"\n    }],\n    selectedItemKey: \"\"\n  }, {\n    name: \"tipo\",\n    type: \"select\",\n    placeholder: \"Tipo\",\n    items: [{\n      key: \"1\",\n      value: \"Medico\"\n    }, {\n      key: \"2\",\n      value: \"Enfermera\"\n    }, {\n      key: \"3\",\n      value: \"Jefe\"\n    }],\n    selectedItemKey: \"\"\n  }, {\n    name: \"buscar\",\n    type: \"submit\",\n    placeholder: \"Buscar\",\n    value: \"Buscar\",\n    classes: [\"btn\", \"btn-primary\"]\n  }, {\n    name: \"exportar_v1\",\n    type: \"submit\",\n    placeholder: \"Exportar V1\",\n    value: \"Exportar V1\",\n    classes: [\"btn\", \"btn-warning\"]\n  }, {\n    name: \"exportar_v2\",\n    type: \"submit\",\n    placeholder: \"Exportar V2\",\n    value: \"Exportar V2\",\n    classes: [\"btn\", \"btn-warning\"]\n  }];\n  let tableHeaders = [\"Id\", \"Estado\", \"Tipo\", \"Categoria\", \"Empresa Asignada\", \"Solicitante\", \"Fecha\"];\n  const actions = {\n    edit: {\n      theClass: \"btn btn-primary\",\n      label: \"Editar\"\n    },\n    aprobe: {\n      theClass: \"btn btn-warning\",\n      label: \"Aprobar\"\n    },\n    delete: {\n      theClass: \"btn btn-danger\",\n      label: \"Borrar\"\n    }\n  };\n\n  let actionTriggered = (id, action) => {\n    alert(`number:${id}, action:${action}`);\n  };\n\n  let pageChanged = n => {\n    fetchData(n);\n  };\n\n  let filterActionTriggered = action => {\n    if (action == \"buscar\") {\n      fetchData();\n    }\n  };\n\n  const [dataState, setDataState] = useState(DataState.Loading);\n  const [fetchedData, setFetchedData] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  let fetchData = (page = 1) => {\n    setDataState(DataState.Loading);\n\n    const execute = async () => {\n      try {\n        const result = await axios(\"http://localhost:4000/v1/services\"); // add the GET URI dynamically\n\n        parseData(result.data);\n        setCurrentPage(page);\n      } catch (err) {\n        setDataState(DataState.Error);\n        alert(`Ocurrió un error porfavor reintente ${err}`);\n      }\n    };\n\n    execute();\n  };\n\n  let parseData = response => {\n    let myData = [];\n    response.data.items.forEach(function (item) {\n      let actions = [\"edit\"];\n\n      if (item.categoria_enum == 1) {\n        actions.push(\"aprobe\");\n        actions.push(\"delete\");\n      }\n\n      myData.push({\n        id: item.id,\n        contents: [item.id, item.estado, item.tipo, item.categoria, item.empresa_asignada, item.solicitante, item.fecha],\n        actions: actions\n      });\n    });\n    setFetchedData(myData);\n  };\n\n  let table = null;\n\n  switch (dataState) {\n    case DataState.Loading:\n      {\n        table = /*#__PURE__*/React.createElement(\"div\", {\n          className: [\"container-fluid\", styles.fullheight].join(\" \"),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: [\"jumbotron\", \"jumbotron-fluid\", styles.fullheight].join(\" \"),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"container\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"text-center\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(\"i\", {\n          className: \"fas fa-10x fa-file-upload\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 17\n          }\n        }), /*#__PURE__*/React.createElement(\"h3\", {\n          className: \"display-4\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 17\n          }\n        }, \"Cargando ...\"), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"spinner-border text-warning\",\n          role: \"status\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          className: \"sr-only\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 19\n          }\n        }, \"Loading...\"))))));\n        break;\n      }\n\n    case DataState.Error:\n      {\n        table = /*#__PURE__*/React.createElement(\"div\", {\n          className: [\"container-fluid\", styles.fullheight].join(\" \"),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: [\"jumbotron\", \"jumbotron-fluid\", styles.fullheight].join(\" \"),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"container\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"text-center\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(\"i\", {\n          className: \"fas fa-10x fa-file-upload\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 17\n          }\n        }), /*#__PURE__*/React.createElement(\"h3\", {\n          className: \"display-4\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 17\n          }\n        }, \"Error parse ...\"), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"spinner-border text-warning\",\n          role: \"status\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          className: \"sr-only\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 19\n          }\n        }, \"Loading...\"))))));\n        break;\n      }\n\n    default:\n      {\n        table = /*#__PURE__*/React.createElement(\"div\", {\n          className: \"container-fluid\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"table-responsive\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(DynamicTable, {\n          headers: tableHeaders,\n          data: fetchedData,\n          actions: actions,\n          actionTriggered: actionTriggered,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 13\n          }\n        }), /*#__PURE__*/React.createElement(TablePagination, {\n          step: 1,\n          numbersShown: 10,\n          currentPage: currentPage,\n          totalPages: 100,\n          pageChanged: n => pageChanged(n),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 13\n          }\n        })));\n        break;\n      }\n  }\n\n  if (dataState != DataState.Error && fetchedData.length == 0) {\n    table = /*#__PURE__*/React.createElement(\"div\", {\n      className: [\"container-fluid\", styles.fullheight].join(\" \"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: [\"jumbotron\", \"jumbotron-fluid\", styles.fullheight].join(\" \"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-10x fa-file-upload\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"display-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 15\n      }\n    }, \"No se encontraron datos\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 15\n      }\n    }, \"No existen registros para los filtros de consulta seleccionados, por favor intente con otros filtros\")))));\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 9\n    }\n  }, \"Consulta \", /*#__PURE__*/React.createElement(\"small\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 20\n    }\n  }, \"Servicios\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TableFilters, {\n    elements: filterElements,\n    actionTriggered: filterActionTriggered,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 11\n    }\n  }, table))));\n};\n\nexport default Services;","map":{"version":3,"sources":["/Users/eduardoescobar/proyectos/own/hedu911-template/src/containers/Services/Services.tsx"],"names":["React","useState","useEffect","axios","TableFilters","DynamicTable","TablePagination","styles","DataState","Services","filterElements","name","type","placeholder","upCase","value","items","key","selectedItemKey","classes","tableHeaders","actions","edit","theClass","label","aprobe","delete","actionTriggered","id","action","alert","pageChanged","n","fetchData","filterActionTriggered","dataState","setDataState","Loading","fetchedData","setFetchedData","currentPage","setCurrentPage","page","execute","result","parseData","data","err","Error","response","myData","forEach","item","categoria_enum","push","contents","estado","tipo","categoria","empresa_asignada","solicitante","fecha","table","fullheight","join","length"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAqC,OAArC;AAEA,OAAOC,YAAP,MAAyB,sDAAzB;AACA,OAAOC,YAAP,MAAyB,sDAAzB;AACA,OAAOC,eAAP,MAA4B,4DAA5B;AACA,OAAOC,MAAP,MAAmB,uBAAnB;IAGKC,S;;WAAAA,S;AAAAA,EAAAA,S,CAAAA,S;AAAAA,EAAAA,S,CAAAA,S;AAAAA,EAAAA,S,CAAAA,S;GAAAA,S,KAAAA,S;;AAKL,MAAMC,QAAyB,GAAG,CAAC,EAAD,KAAQ;AACxC,QAAMC,cAAc,GAAG,CACrB;AAAEC,IAAAA,IAAI,EAAE,IAAR;AAAcC,IAAAA,IAAI,EAAE,MAApB;AAA4BC,IAAAA,WAAW,EAAE;AAAzC,GADqB,EAErB;AACEF,IAAAA,IAAI,EAAE,kBADR;AAEEC,IAAAA,IAAI,EAAE,MAFR;AAGEC,IAAAA,WAAW,EAAE;AAHf,GAFqB,EAOrB;AACEF,IAAAA,IAAI,EAAE,eADR;AAEEC,IAAAA,IAAI,EAAE,MAFR;AAGEC,IAAAA,WAAW,EAAE,eAHf;AAIEC,IAAAA,MAAM,EAAE;AAJV,GAPqB,EAarB;AACEH,IAAAA,IAAI,EAAE,iBADR;AAEEC,IAAAA,IAAI,EAAE,MAFR;AAGEC,IAAAA,WAAW,EAAE,iBAHf;AAIEC,IAAAA,MAAM,EAAE;AAJV,GAbqB,EAmBrB;AACEH,IAAAA,IAAI,EAAE,cADR;AAEEC,IAAAA,IAAI,EAAE,MAFR;AAGEC,IAAAA,WAAW,EAAE;AAHf,GAnBqB,EAwBrB;AACEF,IAAAA,IAAI,EAAE,WADR;AAEEC,IAAAA,IAAI,EAAE,MAFR;AAGEC,IAAAA,WAAW,EAAE,WAHf;AAIEE,IAAAA,KAAK,EAAE;AAJT,GAxBqB,EA8BrB;AACEJ,IAAAA,IAAI,EAAE,QADR;AAEEC,IAAAA,IAAI,EAAE,QAFR;AAGEC,IAAAA,WAAW,EAAE,QAHf;AAIEG,IAAAA,KAAK,EAAE,CACL;AAAEC,MAAAA,GAAG,EAAE,GAAP;AAAYF,MAAAA,KAAK,EAAE;AAAnB,KADK,EAEL;AAAEE,MAAAA,GAAG,EAAE,GAAP;AAAYF,MAAAA,KAAK,EAAE;AAAnB,KAFK,EAGL;AAAEE,MAAAA,GAAG,EAAE,GAAP;AAAYF,MAAAA,KAAK,EAAE;AAAnB,KAHK,CAJT;AASEG,IAAAA,eAAe,EAAE;AATnB,GA9BqB,EAyCrB;AACEP,IAAAA,IAAI,EAAE,MADR;AAEEC,IAAAA,IAAI,EAAE,QAFR;AAGEC,IAAAA,WAAW,EAAE,MAHf;AAIEG,IAAAA,KAAK,EAAE,CACL;AAAEC,MAAAA,GAAG,EAAE,GAAP;AAAYF,MAAAA,KAAK,EAAE;AAAnB,KADK,EAEL;AAAEE,MAAAA,GAAG,EAAE,GAAP;AAAYF,MAAAA,KAAK,EAAE;AAAnB,KAFK,EAGL;AAAEE,MAAAA,GAAG,EAAE,GAAP;AAAYF,MAAAA,KAAK,EAAE;AAAnB,KAHK,CAJT;AASEG,IAAAA,eAAe,EAAE;AATnB,GAzCqB,EAoDrB;AACEP,IAAAA,IAAI,EAAE,QADR;AAEEC,IAAAA,IAAI,EAAE,QAFR;AAGEC,IAAAA,WAAW,EAAE,QAHf;AAIEE,IAAAA,KAAK,EAAE,QAJT;AAKEI,IAAAA,OAAO,EAAE,CAAC,KAAD,EAAQ,aAAR;AALX,GApDqB,EA2DrB;AACER,IAAAA,IAAI,EAAE,aADR;AAEEC,IAAAA,IAAI,EAAE,QAFR;AAGEC,IAAAA,WAAW,EAAE,aAHf;AAIEE,IAAAA,KAAK,EAAE,aAJT;AAKEI,IAAAA,OAAO,EAAE,CAAC,KAAD,EAAQ,aAAR;AALX,GA3DqB,EAkErB;AACER,IAAAA,IAAI,EAAE,aADR;AAEEC,IAAAA,IAAI,EAAE,QAFR;AAGEC,IAAAA,WAAW,EAAE,aAHf;AAIEE,IAAAA,KAAK,EAAE,aAJT;AAKEI,IAAAA,OAAO,EAAE,CAAC,KAAD,EAAQ,aAAR;AALX,GAlEqB,CAAvB;AA0EA,MAAIC,YAAY,GAAG,CACjB,IADiB,EAEjB,QAFiB,EAGjB,MAHiB,EAIjB,WAJiB,EAKjB,kBALiB,EAMjB,aANiB,EAOjB,OAPiB,CAAnB;AASA,QAAMC,OAAO,GAAG;AACdC,IAAAA,IAAI,EAAE;AACJC,MAAAA,QAAQ,EAAE,iBADN;AAEJC,MAAAA,KAAK,EAAE;AAFH,KADQ;AAKdC,IAAAA,MAAM,EAAE;AACNF,MAAAA,QAAQ,EAAE,iBADJ;AAENC,MAAAA,KAAK,EAAE;AAFD,KALM;AASdE,IAAAA,MAAM,EAAE;AACNH,MAAAA,QAAQ,EAAE,gBADJ;AAENC,MAAAA,KAAK,EAAE;AAFD;AATM,GAAhB;;AAeA,MAAIG,eAAe,GAAG,CAACC,EAAD,EAAaC,MAAb,KAAgC;AACpDC,IAAAA,KAAK,CAAE,UAASF,EAAG,YAAWC,MAAO,EAAhC,CAAL;AACD,GAFD;;AAGA,MAAIE,WAAW,GAAIC,CAAD,IAAe;AAC/BC,IAAAA,SAAS,CAACD,CAAD,CAAT;AACD,GAFD;;AAGA,MAAIE,qBAAqB,GAAIL,MAAD,IAAoB;AAC9C,QAAIA,MAAM,IAAI,QAAd,EAAwB;AACtBI,MAAAA,SAAS;AACV;AACF,GAJD;;AAMA,QAAM,CAACE,SAAD,EAAYC,YAAZ,IAA4BnC,QAAQ,CAACO,SAAS,CAAC6B,OAAX,CAA1C;AACA,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCtC,QAAQ,CAAmB,EAAnB,CAA9C;AACA,QAAM,CAACuC,WAAD,EAAcC,cAAd,IAAgCxC,QAAQ,CAAC,CAAD,CAA9C;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACd+B,IAAAA,SAAS;AACV,GAFQ,EAEN,EAFM,CAAT;;AAIA,MAAIA,SAAS,GAAG,CAACS,IAAY,GAAG,CAAhB,KAAsB;AACpCN,IAAAA,YAAY,CAAC5B,SAAS,CAAC6B,OAAX,CAAZ;;AACA,UAAMM,OAAO,GAAG,YAAY;AAC1B,UAAI;AACF,cAAMC,MAAM,GAAG,MAAMzC,KAAK,CAAC,mCAAD,CAA1B,CADE,CAC+D;;AACjE0C,QAAAA,SAAS,CAACD,MAAM,CAACE,IAAR,CAAT;AACAL,QAAAA,cAAc,CAACC,IAAD,CAAd;AACD,OAJD,CAIE,OAAOK,GAAP,EAAY;AACZX,QAAAA,YAAY,CAAC5B,SAAS,CAACwC,KAAX,CAAZ;AACAlB,QAAAA,KAAK,CAAE,uCAAsCiB,GAAI,EAA5C,CAAL;AACD;AACF,KATD;;AAUAJ,IAAAA,OAAO;AACR,GAbD;;AAqBA,MAAIE,SAAS,GAAII,QAAD,IAA6B;AAC3C,QAAIC,MAAwB,GAAG,EAA/B;AACAD,IAAAA,QAAQ,CAACH,IAAT,CAAc9B,KAAd,CAAoBmC,OAApB,CAA4B,UAAUC,IAAV,EAAqB;AAC/C,UAAI/B,OAAO,GAAG,CAAC,MAAD,CAAd;;AACA,UAAI+B,IAAI,CAACC,cAAL,IAAuB,CAA3B,EAA8B;AAC5BhC,QAAAA,OAAO,CAACiC,IAAR,CAAa,QAAb;AACAjC,QAAAA,OAAO,CAACiC,IAAR,CAAa,QAAb;AACD;;AACDJ,MAAAA,MAAM,CAACI,IAAP,CAAY;AACV1B,QAAAA,EAAE,EAAEwB,IAAI,CAACxB,EADC;AAEV2B,QAAAA,QAAQ,EAAE,CACRH,IAAI,CAACxB,EADG,EAERwB,IAAI,CAACI,MAFG,EAGRJ,IAAI,CAACK,IAHG,EAIRL,IAAI,CAACM,SAJG,EAKRN,IAAI,CAACO,gBALG,EAMRP,IAAI,CAACQ,WANG,EAORR,IAAI,CAACS,KAPG,CAFA;AAWVxC,QAAAA,OAAO,EAAEA;AAXC,OAAZ;AAaD,KAnBD;AAoBAkB,IAAAA,cAAc,CAACW,MAAD,CAAd;AACD,GAvBD;;AAyBA,MAAIY,KAAK,GAAG,IAAZ;;AACA,UAAQ3B,SAAR;AACE,SAAK3B,SAAS,CAAC6B,OAAf;AAAwB;AACtByB,QAAAA,KAAK,gBACH;AAAK,UAAA,SAAS,EAAE,CAAC,iBAAD,EAAoBvD,MAAM,CAACwD,UAA3B,EAAuCC,IAAvC,CAA4C,GAA5C,CAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE;AACE,UAAA,SAAS,EAAE,CAAC,WAAD,EAAc,iBAAd,EAAiCzD,MAAM,CAACwD,UAAxC,EAAoDC,IAApD,CACT,GADS,CADb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAKE;AAAK,UAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE;AAAK,UAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE;AAAG,UAAA,SAAS,EAAC,2BAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,eAEE;AAAI,UAAA,SAAS,EAAC,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAFF,eAGE;AAAK,UAAA,SAAS,EAAC,6BAAf;AAA6C,UAAA,IAAI,EAAC,QAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE;AAAM,UAAA,SAAS,EAAC,SAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,CAHF,CADF,CALF,CADF,CADF;AAmBA;AACD;;AACD,SAAKxD,SAAS,CAACwC,KAAf;AAAsB;AACpBc,QAAAA,KAAK,gBACH;AAAK,UAAA,SAAS,EAAE,CAAC,iBAAD,EAAoBvD,MAAM,CAACwD,UAA3B,EAAuCC,IAAvC,CAA4C,GAA5C,CAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE;AACE,UAAA,SAAS,EAAE,CAAC,WAAD,EAAc,iBAAd,EAAiCzD,MAAM,CAACwD,UAAxC,EAAoDC,IAApD,CACT,GADS,CADb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAKE;AAAK,UAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE;AAAK,UAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE;AAAG,UAAA,SAAS,EAAC,2BAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,eAEE;AAAI,UAAA,SAAS,EAAC,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAFF,eAGE;AAAK,UAAA,SAAS,EAAC,6BAAf;AAA6C,UAAA,IAAI,EAAC,QAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE;AAAM,UAAA,SAAS,EAAC,SAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,CAHF,CADF,CALF,CADF,CADF;AAmBA;AACD;;AACD;AAAS;AACPF,QAAAA,KAAK,gBACH;AAAK,UAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE;AAAK,UAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE,oBAAC,YAAD;AACE,UAAA,OAAO,EAAE1C,YADX;AAEE,UAAA,IAAI,EAAEkB,WAFR;AAGE,UAAA,OAAO,EAAEjB,OAHX;AAIE,UAAA,eAAe,EAAEM,eAJnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,eAOE,oBAAC,eAAD;AACE,UAAA,IAAI,EAAE,CADR;AAEE,UAAA,YAAY,EAAE,EAFhB;AAGE,UAAA,WAAW,EAAEa,WAHf;AAIE,UAAA,UAAU,EAAE,GAJd;AAKE,UAAA,WAAW,EAAGR,CAAD,IAAOD,WAAW,CAACC,CAAD,CALjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAPF,CADF,CADF;AAmBA;AACD;AAlEH;;AAoEA,MAAIG,SAAS,IAAI3B,SAAS,CAACwC,KAAvB,IAAgCV,WAAW,CAAC2B,MAAZ,IAAsB,CAA1D,EAA6D;AAC3DH,IAAAA,KAAK,gBACH;AAAK,MAAA,SAAS,EAAE,CAAC,iBAAD,EAAoBvD,MAAM,CAACwD,UAA3B,EAAuCC,IAAvC,CAA4C,GAA5C,CAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,SAAS,EAAE,CAAC,WAAD,EAAc,iBAAd,EAAiCzD,MAAM,CAACwD,UAAxC,EAAoDC,IAApD,CACT,GADS,CADb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAKE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAG,MAAA,SAAS,EAAC,2BAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAEE;AAAI,MAAA,SAAS,EAAC,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8GAHF,CADF,CALF,CADF,CADF;AAoBD;;AAED,sBACE,uDACE;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BACW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADX,CADF,eAIE;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,YAAD;AACE,IAAA,QAAQ,EAAEtD,cADZ;AAEE,IAAA,eAAe,EAAEwB,qBAFnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAKE;AAAK,IAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAyB4B,KAAzB,CALF,CAJF,CADF,CADF;AAgBD,CAjRD;;AAmRA,eAAerD,QAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios, { AxiosResponse } from \"axios\";\n\nimport TableFilters from \"../../components/QueryView/TableFilters/TableFilters\";\nimport DynamicTable from \"../../components/QueryView/DynamicTable/DynamicTable\";\nimport TablePagination from \"../../components/QueryView/TablePagination/TablePagination\";\nimport styles from \"./Services.module.css\";\ntype Props = {};\n\nenum DataState {\n  Loading,\n  Loaded,\n  Error,\n}\nconst Services: React.FC<Props> = ({}) => {\n  const filterElements = [\n    { name: \"id\", type: \"text\", placeholder: \"Id\" },\n    {\n      name: \"numero_documento\",\n      type: \"text\",\n      placeholder: \"Numero de documento\",\n    },\n    {\n      name: \"primer_nombre\",\n      type: \"text\",\n      placeholder: \"Primer nombre\",\n      upCase: true,\n    },\n    {\n      name: \"primer_apellido\",\n      type: \"text\",\n      placeholder: \"Primer apellido\",\n      upCase: true,\n    },\n    {\n      name: \"fecha_inicio\",\n      type: \"date\",\n      placeholder: \"Fecha inicio\",\n    },\n    {\n      name: \"fecha_fin\",\n      type: \"date\",\n      placeholder: \"Fecha fin\",\n      value: \"1990-12-12\",\n    },\n    {\n      name: \"estado\",\n      type: \"select\",\n      placeholder: \"Estado\",\n      items: [\n        { key: \"1\", value: \"Pendiente\" },\n        { key: \"2\", value: \"Aprobado\" },\n        { key: \"3\", value: \"Rechazado\" },\n      ],\n      selectedItemKey: \"\",\n    },\n    {\n      name: \"tipo\",\n      type: \"select\",\n      placeholder: \"Tipo\",\n      items: [\n        { key: \"1\", value: \"Medico\" },\n        { key: \"2\", value: \"Enfermera\" },\n        { key: \"3\", value: \"Jefe\" },\n      ],\n      selectedItemKey: \"\",\n    },\n    {\n      name: \"buscar\",\n      type: \"submit\",\n      placeholder: \"Buscar\",\n      value: \"Buscar\",\n      classes: [\"btn\", \"btn-primary\"],\n    },\n    {\n      name: \"exportar_v1\",\n      type: \"submit\",\n      placeholder: \"Exportar V1\",\n      value: \"Exportar V1\",\n      classes: [\"btn\", \"btn-warning\"],\n    },\n    {\n      name: \"exportar_v2\",\n      type: \"submit\",\n      placeholder: \"Exportar V2\",\n      value: \"Exportar V2\",\n      classes: [\"btn\", \"btn-warning\"],\n    },\n  ];\n  let tableHeaders = [\n    \"Id\",\n    \"Estado\",\n    \"Tipo\",\n    \"Categoria\",\n    \"Empresa Asignada\",\n    \"Solicitante\",\n    \"Fecha\",\n  ];\n  const actions = {\n    edit: {\n      theClass: \"btn btn-primary\",\n      label: \"Editar\",\n    },\n    aprobe: {\n      theClass: \"btn btn-warning\",\n      label: \"Aprobar\",\n    },\n    delete: {\n      theClass: \"btn btn-danger\",\n      label: \"Borrar\",\n    },\n  };\n\n  let actionTriggered = (id: number, action: string) => {\n    alert(`number:${id}, action:${action}`);\n  };\n  let pageChanged = (n: number) => {\n    fetchData(n);\n  };\n  let filterActionTriggered = (action: string) => {\n    if (action == \"buscar\") {\n      fetchData();\n    }\n  };\n\n  const [dataState, setDataState] = useState(DataState.Loading);\n  const [fetchedData, setFetchedData] = useState<Array<TableData>>([]);\n  const [currentPage, setCurrentPage] = useState(1);\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  let fetchData = (page: number = 1) => {\n    setDataState(DataState.Loading);\n    const execute = async () => {\n      try {\n        const result = await axios(\"http://localhost:4000/v1/services\"); // add the GET URI dynamically\n        parseData(result.data);\n        setCurrentPage(page);\n      } catch (err) {\n        setDataState(DataState.Error);\n        alert(`Ocurrió un error porfavor reintente ${err}`);\n      }\n    };\n    execute();\n  };\n\n  interface TableData {\n    id: number;\n    contents: Array<string>;\n    actions: Array<string>;\n  }\n\n  let parseData = (response: AxiosResponse) => {\n    let myData: Array<TableData> = [];\n    response.data.items.forEach(function (item: any) {\n      let actions = [\"edit\"];\n      if (item.categoria_enum == 1) {\n        actions.push(\"aprobe\");\n        actions.push(\"delete\");\n      }\n      myData.push({\n        id: item.id,\n        contents: [\n          item.id,\n          item.estado,\n          item.tipo,\n          item.categoria,\n          item.empresa_asignada,\n          item.solicitante,\n          item.fecha,\n        ],\n        actions: actions,\n      });\n    });\n    setFetchedData(myData);\n  };\n\n  let table = null;\n  switch (dataState) {\n    case DataState.Loading: {\n      table = (\n        <div className={[\"container-fluid\", styles.fullheight].join(\" \")}>\n          <div\n            className={[\"jumbotron\", \"jumbotron-fluid\", styles.fullheight].join(\n              \" \"\n            )}\n          >\n            <div className=\"container\">\n              <div className=\"text-center\">\n                <i className=\"fas fa-10x fa-file-upload\"></i>\n                <h3 className=\"display-4\">Cargando ...</h3>\n                <div className=\"spinner-border text-warning\" role=\"status\">\n                  <span className=\"sr-only\">Loading...</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      );\n      break;\n    }\n    case DataState.Error: {\n      table = (\n        <div className={[\"container-fluid\", styles.fullheight].join(\" \")}>\n          <div\n            className={[\"jumbotron\", \"jumbotron-fluid\", styles.fullheight].join(\n              \" \"\n            )}\n          >\n            <div className=\"container\">\n              <div className=\"text-center\">\n                <i className=\"fas fa-10x fa-file-upload\"></i>\n                <h3 className=\"display-4\">Error parse ...</h3>\n                <div className=\"spinner-border text-warning\" role=\"status\">\n                  <span className=\"sr-only\">Loading...</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      );\n      break;\n    }\n    default: {\n      table = (\n        <div className=\"container-fluid\">\n          <div className=\"table-responsive\">\n            <DynamicTable\n              headers={tableHeaders}\n              data={fetchedData}\n              actions={actions}\n              actionTriggered={actionTriggered}\n            />\n            <TablePagination\n              step={1}\n              numbersShown={10}\n              currentPage={currentPage}\n              totalPages={100}\n              pageChanged={(n) => pageChanged(n)}\n            />\n          </div>\n        </div>\n      );\n      break;\n    }\n  }\n  if (dataState != DataState.Error && fetchedData.length == 0) {\n    table = (\n      <div className={[\"container-fluid\", styles.fullheight].join(\" \")}>\n        <div\n          className={[\"jumbotron\", \"jumbotron-fluid\", styles.fullheight].join(\n            \" \"\n          )}\n        >\n          <div className=\"container\">\n            <div className=\"text-center\">\n              <i className=\"fas fa-10x fa-file-upload\"></i>\n              <h2 className=\"display-4\">No se encontraron datos</h2>\n              <p>\n                No existen registros para los filtros de consulta seleccionados,\n                por favor intente con otros filtros\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <div className=\"container-fluid\">\n        <h1>\n          Consulta <small>Servicios</small>\n        </h1>\n        <div className=\"row\">\n          <TableFilters\n            elements={filterElements}\n            actionTriggered={filterActionTriggered}\n          />\n          <div className=\"col-10\">{table}</div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Services;\n"]},"metadata":{},"sourceType":"module"}